<!DOCTYPE html>
<html>
    <body>
        <input type="text" id="search">
        <script>
            document.getElementById("search_button").addEventListener("click", () => {
            let value = document.getElementById("search").value;

            search(value);
            });

            async function search(value) {
            let fetchObj = await fetch(`/get?url=http://34.210.233.223/api/api.php?search_book=${value}`);
            let json = await fetchObj.json();

            let booksArray = json.eBookData;

            let tbody = document.getElementById("tbody");
            let tr = document.createElement("tr"); // tr = table row
            tbody.appendChild(tr);

            for(let i = 0; i < booksArray.length; i++) {
                let td = document.createElement("td");

                let book = booksArray[i];

                td.innerHTML = `
                <a href="read_book.html?epub=http://34.210.233.223/upload/epubs/${book.pdf_name}">
                    <img src="http://34.210.233.223/upload/category/${book.book_image}">
                    <br>
                    <strong>${book.book_name}</strong>
                </a>
                `;

                tr.appendChild(td);

                if(i !== 0 && i % 4 === 3) {
                    tr = document.createElement("tr");
                    tbody.appendChild(tr);

                }
            }

            console.log(json);
            }
        </script>
    </body>
</html>